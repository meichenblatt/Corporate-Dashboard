DashboardApp.controller("geospatialController",function($scope,Locations,$interval){function getLocations(){Locations.get({},function(locations){$scope.markers=[];for(var key in locations)"object"==typeof locations[key]&&"$promise"!=key&&$scope.markers.push(locations[key])})}$scope.map={center:{latitude:40,longitude:-97.380979},zoom:4},getLocations(),$scope.geoupdates=$interval(getLocations,15e3),$scope.$on("$destroy",function(){angular.isDefined($scope.geoupdates)&&$interval.cancel($scope.geoupdates)})});